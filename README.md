# Explore Prosper loandata
# Prosper贷款数据分析报告

## 背景
本研究的数据集来自Prosper。Prosper是美国的一家P2P（个人对个人）在线借贷平台网站，世界排名2万左右。网站撮合了一些有闲钱的人和一些急于用钱的人。用户若有贷款需求，可在网站上列出期望数额和可承受的最大利率。潜在贷方则为数额和利率展开竞价。这种交易对借贷双方是一种双赢。卖家可以获得比银行更高的利息收入，而对于买家来说，除了过程快捷便利和可以获得较低的还款利率外，更主要的是你不需要经过漫长的审查过程，不会遇到在银行申请贷款遭拒时的尴尬。此数据集包含113,937项贷款，每项贷款有81个变量，包括贷款金额、借款利率（或利率）、当前贷款状态、借款人收入、借款人就业状态、借款人信用历史及最新支付信息。本次分析筛选了其中的16个变量，试图探索贷款金额、贷款利率等变量的影响因素。

## 目的
- 了解变量的分布并检查异常和异常值；
- 通过使用适当的图表如散点图、直方图、条形图和箱图量化和可视化数据集的各个变量；
- 在构建预测模型之前，通过探究变量来辨别数据集中最重要的变量和关系，计算他们的相关性，并调查条件均值；
- 通过重新构造数据框架和使用颜色、形状等可视化方法来探索贷款金额、贷款利率等主要变量的影响因素。

## 分析

### 数据集结构

本研究的数据集来自Prosper，本次分析筛选了其中的16个变量，如下：
* CreditGrade：2009年7月1日前客户的信用等级

* Term：贷款期限

* BorrowerRate：贷款利率

* ProsperRating..Alpha.：2009年7月1日后客户的信用等级

* ProsperScore：自定义风险评分

* ListingCategory..numeric.：贷款理由

* BorrowerState：贷款人借款地点

* Occupation：贷款人职业

* EmploymentStatus：贷款人职业状态

* CreditScoreRangeLower：贷款人信用评分下线

* CreditScoreRangeUpper：贷款人信用评分上线

* DelinquenciesLast7Year：贷款人信用资料提交时过去7年违约次数

* DebtToIncomeRatio：信用资料提交时贷款人的债务收入比

* IncomeRange：信用资料提交时贷款人的收入范围

* LoanOriginalAmount：贷款起始金额

* LoanOriginationDate：贷款发放时间

  根据研究兴趣和目的，本研究还创建了新的变量：

* CreditScore：贷款人信用评分

* Period：贷款发放时间所处阶段

### 更正数据类型

对部分变量进行了类型调整，如下：
（1）将Term的类型转换成factor,并将Term的lables改为'1 year', '3 year', '5 year'。因为我们发现Term的周期只有1，3，5，因此Term应该为分类变量。
（2）将CreditGrade改为有序变量,因为2009年7月1日前客户的信用等级有高低之分。
（3）将ProsperRating..Alpha.改为有序变量，因为2009年7月1日后客户的信用等级有高低之分。
（4）将ListingCategory..numeric. 类型转换成factor，因为贷款理由是分类变量，原本的数字对应的也是不同的贷款理由。。
（5）将IncomeRange改为有序变量，因为信用资料提交时贷款人的收入范围有高低之分。
（6）将LoanOriginationDate类型转换成Date，因为贷款发放时间是日期型的变量。

### 数据集内感兴趣的主要特性

我数据集内感兴趣的主要特征是贷款金额和贷款利率之间关系，以及它们的影响因素。

### 双变量绘图分析

在双变量分析中本研究发现了贷款起始金额和贷款期限成正比；贷款起始金额与职业状态有关，那些有稳定的全职工作的贷款申请人能申请到更多的贷款；贷款起始金额随着信用资料提交时贷款人的收入范围的增长而增长；贷款起始金额与贷款理由有关。贷款起始金额和贷款利率之间呈现出弱负相关关系。贷款利率和贷款人信用评分两个变量之间呈现较明显的负相关关系。

更长的贷款期限对应着更高的贷款起始金额。那些有稳定的全职工作的贷款申请人能申请到更多的贷款起始金额。收入更高的贷款人能获得更高的贷款起始金额。贷款起始金额较高的贷款理由是分类1债务合并和分类8育儿。贷款起始金额越高，贷款利率越低。贷款人的信用评分越高，贷款利率越低。

我发现最强的关系是贷款利率和贷款人信用评分两个变量之间呈现较明显的负相关关系，相关系数是-0.46。

### 多变量绘图分析

不论是2009年7月1日之前还是2009年7月1日之后，借款利率都随着信用评分的升高而降低，贷款人的信用评级和贷款利率都呈反比。

信用等级高且信用资料提交时过去7年违约次数少的贷款人能贷到更多的贷款；那些信用评分高的贷款人将以更低的贷款利率获得较高的贷款起始金额。

### 创建线性模型

本研究创建了线性模型讨论贷款人的信用评分、信用等级和贷款起始金额对贷款利率的影响。由输出的数据表可知，2009年7月1日之后的R^2(0.9)大于2009年7月1日之前的R^2(0.5),这说明2009年7月1日之后prosper更加关注贷款人的信用评级，贷款人的信用评级对贷款利率的影响变大。

## 结论

### （1）贷款利率和贷款人信用评分散点图

![贷款利率和贷款人信用评分](E:\github\Explore-Prosper-loandata--R\结论图片\贷款利率和贷款人信用评分.png)

从CreditScore和BorrowerRate散点图可以看出，贷款利率和贷款人信用评分两个变量之间呈现较明显的负相关关系，贷款人的信用评分越高，贷款利率越低，相关系数是-0.46。

### （2）贷款人的信用评分与贷款利率散点图

![贷款人的信用评分与贷款利率散点图](E:\github\Explore-Prosper-loandata--R\结论图片\贷款人的信用评分与贷款利率散点图.png)

由图可知，不论是2009年7月1日之前还是2009年7月1日之后，借款利率都随着信用评分的升高而降低。对比上下两图可知，在2009年7月1日之后，prosper几乎不会给信用评分为600分以下的用户提供贷款了。

### （3）贷款人的贷款起始金额与贷款人过去7年违约次数和贷款人信用评级关系图

![贷款人的贷款起始金额与贷款人过去7年违约次数和贷款人信用评级关系图](E:\github\Explore-Prosper-loandata--R\结论图片\贷款人的贷款起始金额与贷款人过去7年违约次数和贷款人信用评级关系图.png)

由图可知，从左上角到右下角颜色逐渐变浅，即2009年7月1日后，随着贷款人信用资料提交时过去7年违约次数的增大，贷款起始金额在不断地减少，客户的信用等级也在不断变小。也就是说那些信用等级高且信用资料提交时过去7年违约次数少的贷款人能贷到更多的贷款；相反的，那些信用等级低且信用资料提交时过去7年违约次数多的贷款人只能贷到更少的贷款。